class Timer{constructor(){this.mark()}mark(){this.startTime=Date.now()}secondsElapsed(){return(Date.now()-this.startTime)/1e3}millisecondsElapsed(){return Date.now()-this.startTime}}class Refresh{constructor(a,b){this.funct=a,this.rps=b}start(){this.running=!1,this.rpsInterval=1e3/this.rps,this.timer=new Timer,0<this.rps?this.loop():console.log(new WebFootError("Your RPS is at 0 so I'm not even gonna start"))}stop(){this.running=!0}loop(){if(!this.running){window.requestAnimationFrame(this.loop.bind(this));let a=this.timer.millisecondsElapsed();this.currentRPS=a/this.rpsInterval*this.rps,a>this.rpsInterval&&(this.timer.mark(),this.funct?this.funct():(this.running=!0,console.log(new WebFootError("The function you are trying to refresh is undefined"))))}}}class QuadTree{constructor(a,b,c){this.webObject=a,this.MAX_OBJECTS=10,this.MAX_LEVELS=5,this.level=b,this.bounds=c,this.objects=[],this.nodes=[,,,,]}clear(){this.objects=[],this.nodes.forEach(function(a){null!=a&&(a.clear(),a=null)})}split(){let a=this.bounds.width/2,b=this.bounds.height/2,c=this.bounds.x,d=this.bounds.y;this.nodes[0]=new QuadTree(this.level+1,{x:c+a,y:d+b,width:a,height:b}),this.nodes[1]=new QuadTree(this.level+1,{x:c,y:d+b,width:a,height:b}),this.nodes[2]=new QuadTree(this.level+1,{x:c,y:d,width:a,height:b}),this.nodes[3]=new QuadTree(this.level+1,{x:c+a,y:d,width:a,height:b})}getIndex(a){let b=-1,c=this.bounds.x+this.bounds.width/2,d=this.bounds.y+this.bounds.height/2,f=a.y<d&&a.y+a.height<d,g=a.y>d;return a.x<c&&a.x+a.width<c?f?b=1:g&&(b=2):a.x>c&&(f?b=0:g&&(b=3)),b}insert(a,b){if(null!=this.nodes[0]){let c=getIndex(b);if(-1!=c)return void this.nodes[c].insert(this,b)}if(this.objects.push(a,b),this.objects.length>this.MAX_OBJECTS&&this.level<this.MAX_LEVELS){null==this.nodes[0]&&this.split();for(let d,c=0;c<this.objects.length;)d=this.getIndex(this.objects[c]),-1==d?c++:this.nodes[d].insert(this.objects.splice(c,1))}}retrieve(a,b){let c=this.getIndex(b);return-1!=c&&null!=this.nodes[0]&&this.nodes[c].retrieve(a,b),a=this.objects,a}}class InputHandler{constructor(){this.input={keys:[],click:!1}}targetEvents(a,b){let c=this;b.keydown&&a.addEventListener("keydown",function(d){c.input.keys[d.which]=!0}),b.keyup&&a.addEventListener("keyup",function(d){c.input.keys[d.which]=!1}),b.click&&a.addEventListener("click",function(){c.input.click=!0})}get keys(){return this.input.keys}get click(){return this.input.click?(this.input.click=!1,!0):this.input.click}}class WebObject{constructor(a){this.bindElement(a),a.classList.add(this.constructor.name)}bindElement(a){this.element=a;let b=a.getBoundingClientRect();this.setBounds(b)}styleElement(a){Object.assign(this.element.style,a)}setBounds(a){a.x&&("string"==typeof a.x?(this.element.style.left=a.x,this.x=this.element.getBoundingClientRect().x):(this.element.style.left=a.x+"px",this.x=a.x)),a.y&&("string"==typeof a.y?(this.element.style.top=a.y,this.y=this.element.getBoundingClientRect().y):(this.element.style.top=a.y+"px",this.y=a.y)),a.width&&("string"==typeof a.width?(this.element.style.width=a.width,this.width=this.element.getBoundingClientRect().width):(this.element.style.width=a.width+"px",this.width=a.width)),a.height&&("string"==typeof a.height?(this.element.style.height=a.height,this.height=this.element.getBoundingClientRect().height):(this.element.style.height=a.height+"px",this.height=a.height))}getBounds(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}class WebFootError extends Error{}
